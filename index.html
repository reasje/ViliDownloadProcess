<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Moonbase app - Secure Moonchain Wallet for zkEVM & EVM</title>

    <!-- App Metadata -->
    <meta name="description" content="Securely manage, send, and receive cryptocurrencies across zkEVM and all EVM-compatible blockchains with Moonbase Wallet.">
    <meta name="keywords" content="Moonbase Wallet, Moonchain Wallet, zkEVM Wallet, EVM-Compatible Wallet, Crypto Wallet, Ethereum Wallet, DeFi, DApp Browser, Cryptocurrency, Blockchain, Tokens, Secure Wallet, Decentralized Applications, Digital Assets, Crypto Exchange, Token Swap">
    <meta name="author" content="Moonbase Wallet">
    <meta name="application-name" content="Moonbase Wallet">

    <!-- Open Graph Meta Tags (for social media sharing) -->
    <meta property="og:title" content="Moonbase Wallet - Secure Moonchain Wallet for zkEVM & EVM">
    <meta property="og:description" content="Manage, send, and receive cryptocurrencies across zkEVM and all EVM-compatible blockchains with Moonbase Wallet.">
    <meta property="og:image" content="https://www.moonbasewallet.com/assets/images/og-image.png"> <!-- Replace with actual image URL -->
    <meta property="og:url" content="https://www.moonbasewallet.com">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Moonbase Wallet - Secure Moonchain Wallet for zkEVM & EVM">
    <meta name="twitter:description" content="Manage, send, and receive cryptocurrencies across zkEVM and all EVM-compatible blockchains with Moonbase Wallet.">
    <meta name="twitter:image" content="https://www.moonbasewallet.com/assets/images/twitter-card.png"> <!-- Replace with actual image URL -->

    <!-- Viewport Meta Tag for Responsive Design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Existing Scripts and Styles -->
    <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
    <script>
        LA.init({ id: "3GBOo7Uaye87xBDY", ck: "3GBOo7Uaye87xBDY" })
    </script>
    <style>
        /* Styling for the message */
        #message {
            text-align: center;
            font-size: 40px;
            font-weight: bold;
            background-color: #ffcc00;
            color: #000;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }

        /* Styling to center the image */
        #centeredImage {
            display: block;
            width: 100%;
            height: auto;
            margin-left: auto;
            margin-right: auto;
            margin-top: 20px;
        }

        /* Styling for the status message */
        #statusMessage {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #000;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <!-- The message div will be dynamically added for users inside China -->

    <!-- Div for status message -->
    <div id="statusMessage"></div>

    <!-- The WeChat image will be dynamically added for users inside China -->

    <script type="text/javascript">
        window.onload = function () {
            const script = document.createElement('script');
            script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js';

            let isLoaded = false;

            script.onload = function () {
                if (!isLoaded) {
                    isLoaded = true;
                    // User is outside China.
                    // Display "Redirecting to Store..."
                    document.getElementById('statusMessage').innerHTML = 'Redirecting to APP Store...';
                    redirectToStoreOutsideChina();
                }
            };

            script.onerror = function () {
                if (!isLoaded) {
                    isLoaded = true;
                    // User is likely in China.
                    proceedWithOriginalCode();
                }
            };

            document.head.appendChild(script);

            setTimeout(function () {
                if (!isLoaded) {
                    isLoaded = true;
                    // User is likely in China due to timeout.
                    proceedWithOriginalCode();
                }
            }, 500); // 500ms timeout

            function redirectToStoreOutsideChina() {
                // Detect device type and redirect accordingly
                var isAndroid = /Android/i.test(navigator.userAgent);
                var isiOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

                if (isAndroid) {
                    // Android user outside China
                    var googlePlayLink = 'https://play.google.com/store/apps/details?id=com.moonchain.mxc&pli=1'; // Replace YOUR_APP_ID with actual app ID
                    window.location.href = googlePlayLink;
                } else if (isiOS) {
                    // iOS user outside China
                    var appStoreLink = 'https://apps.apple.com/app/moonbase-the-mining-hub/id6736371768'; // Updated link format for Apple App Store
                    window.location.href = appStoreLink;
                } else {
                    // Other devices or platforms
                    window.location.href = 'https://github.com/MXCzkEVM/moonchain-wallet/releases';
                }
            }

            function proceedWithOriginalCode() {
                // Display the message div for users in China
                displayMessageForChinaUsers();
                // Display the WeChat image for users in China
                displayWeChatImageForChinaUsers();

                // Original code
                // Get terminal information
                var Terminal = {
                    // Detect mobile platform type
                    platform: function () {
                        var u = navigator.userAgent, app = navigator.appVersion;
                        return {
                            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, // Android or UC browser
                            iPhone: u.indexOf('iPhone') > -1, // iPhone or QQHD browser
                            iPad: u.indexOf('iPad') > -1 // iPad
                        };
                    }(),
                    // Detect mobile terminal language: zh-cn, en-us, ko-kr, ja-jp...
                    language: (navigator.browserLanguage || navigator.language).toLowerCase()
                }

                // Redirect to different addresses based on different terminals
                var theUrl = 'https://apps.apple.com/app/id6736371768';
                if (Terminal.platform.android) { // Android

                    theUrl = 'https://app.xbmxc.com/app/moonchain.apk';
                    location.href = theUrl;
                } else {
                    if (Terminal.platform.iPhone) { // iPhone

                        theUrl = 'https://apps.apple.com/app/id6736371768';
                        location.href = theUrl;
                    } else if (Terminal.platform.iPad) { // iPad

                        // Differentiate multiple language versions through language
                        switch (Terminal.language) {
                            case 'en-us':// English version of iPad APP Store address
                            case 'ko-kr':// Korean version of iPad APP Store address
                            case 'ja-jp':// Japanese version of iPad APP Store address
                            default:// Default iPad APP Store address
                                theUrl = 'https://apps.apple.com/app/id6736371768';
                                location.href = theUrl;
                        }
                    } else {
                        // Other devices
                        // You can handle other devices if needed
                    }
                }
            }

            function displayMessageForChinaUsers() {
                // Create the message div
                var messageDiv = document.createElement('div');
                messageDiv.id = 'message';
                messageDiv.innerHTML = '🚀 <a href="android.html">安卓安装常见问题</a> | <a href="ios.html">苹果安装常见问题</a> 🚀';
                // Insert the message div at the beginning of the body
                document.body.insertBefore(messageDiv, document.body.firstChild);
            }

            function displayWeChatImageForChinaUsers() {
                // Create the img element
                var image = document.createElement('img');
                image.id = 'centeredImage';
                image.src = 'pic/wechat.jpg'; // Ensure this path is correct
                image.alt = 'WeChat Image';

                // Insert the image after the statusMessage div
                var statusMessageDiv = document.getElementById('statusMessage');
                statusMessageDiv.parentNode.insertBefore(image, statusMessageDiv.nextSibling);
            }
        };
    </script>
</body>
</html>
